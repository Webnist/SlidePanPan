/**
 * Slide Pan Pan
 * Version: 0.7.1.0
 * Author: @Webnist
 * Site: http://webni.st
 * Licensed under the MIT license
 */
!function(t){function e(e,i){var s=parseInt(e.outerWidth(),10),n=parseInt(e.css("margin-left"),10),a=parseInt(e.position().left,10)+n,h=t("i#current-bar");i?(h.stop().animate({width:s,left:a},500,"linear"),e.siblings("li").removeClass("next prev current"),e.removeClass("next prev"),e.addClass("current"),e.next("li").addClass("next"),e.prev("li").addClass("prev")):h.css({width:s,left:a})}function i(e){var i=t("body").width(),s=n.element,a=parseInt(s.outerWidth(!0),10),h=parseInt(a/2,10),l=e.parent("ul"),r=parseInt(l.outerWidth(!0),10),o=parseInt(e.outerWidth(!0),10),p=parseInt(o/2,10),d=parseInt(e.position().left,10),c=p+d,f=c-h,u=l.children("li:last"),v=parseInt(u.outerWidth(!0),10),m=parseInt(u.position().left,10),g=v+m,x=a-g;i>r?l.stop().animate({left:0},500,"linear"):d>=-x?l.stop().animate({left:x},500,"linear"):c>=h?l.stop().animate({left:-f},500,"linear"):l.stop().animate({left:0},500,"linear")}function s(){t(window).resize(function(){var s=n.element,a=s.children("nav").find("li.current"),h=s.children("div"),l=parseInt(h.outerWidth(!0),10),r=h.children("div");e(a,"resize"),i(a),r.each(function(){left=parseInt(t(this).css("left"),10),0>left&&t(this).stop().animate({left:-l},0,"linear")})}).resize()}var n={},a="ontouchstart"in window;t.fn.slidePanPan=function(){if(t(this)[0]){n.element=this;var h=t(this),l=h.children("nav"),r=l.children("ul"),o=r.children("li"),p=r.children("li:first"),d=h.children("div"),c=d.children("div"),f=parseInt(0,10),u=parseInt(c.length,10),v=(parseInt(0,10),parseInt(0,10));o.each(function(e){var i=t(this).outerWidth(!0);f=parseInt(i,10)+f,0===e&&t(this).addClass("current")}),r.css({width:f}),r.append('<i id="current-bar"></i>'),e(p),c.each(function(){t(this).innerHeight()>v&&(v=t(this).innerHeight()),t(this).css({"z-index":u}),u-=1}),c.css({height:v}),d.css({height:v,overflow:"hidden"}),r.on({"touchstart mousedown":function(e){e.preventDefault(),this.bodyWidth=t("body").width(),this.fw=parseInt(h.width(),10),this.navUlWidth=parseInt(r.outerWidth(!0),10),this.max=this.navUlWidth-this.fw,this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.left=t(this).position().left,this.touched=!0,this.move=!1},"touchmove mousemove":function(e){this.touched&&(e.preventDefault(),this.move=!0,this.left=this.left-(this.pageX-(a?e.originalEvent.touches[0].clientX:e.pageX)),t(this).css({left:this.left}),this.accel=5*((a?e.originalEvent.touches[0].clientX:e.pageX)-this.pageX),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX)},"touchend mouseup resize":function(s){if(this.touched){if(this.left+=this.accel,t(this).animate({left:this.left},200,"linear"),!this.move&&(tapTarget=t(s.target),tapTarget.is("li"))){index=parseInt(tapTarget.index(),10);var n=parseInt(c.eq(index).prev("div").css("left"),10),a=parseInt(c.eq(index).next("div").css("left"),10);o.removeClass("current"),tapTarget.addClass("current"),e(tapTarget,s),i(tapTarget),isNaN(n)&&isNaN(a)?c.eq(index).prevAll("div").stop().animate({left:-this.fw},500,"linear"):isNaN(n)?c.stop().animate({left:0},500,"linear"):-this.fw==n?(c.eq(index).stop().animate({left:0},500,"linear"),c.eq(index).nextAll("div").stop().animate({left:0},500,"linear")):c.eq(index).prevAll("div").stop().animate({left:-this.fw},500,"linear")}this.accel=0,this.bodyWidth<this.fw&&(this.left>0&&t(this).stop().animate({left:0},500),this.left<-this.max&&t(this).stop().animate({left:-this.max},500)),this.touched=!1}}}),c.on({"touchstart mousedown":function(e){this.home=parseInt(h.position().top),this.index=parseInt(t(this).index(),10),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.pageY=a?e.originalEvent.touches[0].clientY:e.pageY,this.left=t(this).position().left,this.top=t(this).position().top,this.touched=!0},"touchmove mousemove":function(e){var i=parseInt(t(this).index(),10)+1;u=parseInt(c.length,10),this.touched&&(this.left=this.left-(this.pageX-(a?e.originalEvent.touches[0].clientX:e.pageX)),this.top=this.top-(this.pageY-(a?e.originalEvent.touches[0].clientY:e.pageY)),Math.abs(this.left)>Math.abs(this.top)&&(e.preventDefault(),this.left<0&&u!==i&&t(this).css({left:this.left})),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.pageY=a?e.originalEvent.touches[0].clientY:e.pageY)},"touchend mouseup resize":function(s){this.touched&&(fw=h.width(),s.preventDefault(),this.left<-50?t(this).next("div")[0]&&(t(this).stop().animate({left:-fw},500,"linear"),e(o.eq(this.index).next("li"),s),i(o.eq(this.index).next("li")),t("html, body").stop().animate({scrollTop:this.home},500,"linear")):this.left>50?t(this).prev("div")[0]&&(t(this).prev("div").stop().animate({left:0},500),e(o.eq(this.index).prev("li"),s),i(o.eq(this.index).prev("li")),t("html, body").stop().animate({scrollTop:this.home},500,"linear")):t(this).stop().animate({left:0},500),this.touched=!1)}}),s()}}}(jQuery);